<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<style>
    body{
        text-align: center;
        
    }
</style>

<body>
    <form action="" onsubmit="handlelogin(event)">
        <input type="text" placeholder="enter username" id="username">
        <input type="text" placeholder="enter password" id="password">
        <input type="submit" value="log in">
    </form>

    <form action="" onsubmit="handlesignup(event)">
        <input type="text" placeholder="enter username" id="username">
        <input type="text" placeholder="enter password" id="password">
        <input type="submit" value="sign up">

    </form>
    <div id="root"> </div>
    

    <script>
        function handlelogin(e) {
            event.preventDefault()

            let user = e.target.username.value;
            let password = e.target.password.value;
            let auth = { user, password }



            fetch('/log-in', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(auth)
            }).then(res => res.json())
                .then(data => { 
                    console.log(data)
                    if(data.ok){
                     console.log(data)
                     window.location.href = "/main.html";
                    }
                    else{
                        console.log(data.ok)
                        document.body.style.backgroundColor = 'red'
                        document.getElementById('root').innerHTML =  ` The username or password are inncorrect. please enter try agian `
                    }

                   
                    

                })
        }

        function handlesignup(e) {
            event.preventDefault()

            let user = e.target.username.value;
            let password = e.target.password.value;
            let auth = { user, password }



            fetch('/sign-up', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(auth)
            }).then(res => res.json())
                .then(data => {
                    console.log(data)
                    console.log(`welcome ${data.user}`)

                })
        }




    </script>
</body>

</html>